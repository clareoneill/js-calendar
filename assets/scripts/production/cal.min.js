var t,s,calendar={arrays:{days:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],months:["january","february","march","april","may","june","july","august","september","october","november","december"],daysInMonths:[31,28,31,30,31,30,31,31,30,31,30,31]},calSettings:{NOW:new Date,NOWmonth:"",NOWyear:"",displayNow:"",displayNowTime:"",date:"",day:"",niceDay:"",month:"",niceMonth:"",year:"",firstDay:"",monthLength:"",calHTML:"",display:!1,nextMonth:"",nextYear:"",displayOffset:0},divs:{body:document.getElementsByTagName("BODY")[0],calTitle:document.getElementById("title"),calAppend:document.getElementById("append"),days:"",show:document.getElementById("show"),arrows:document.getElementsByClassName("arrow")},init:function(){t=this,a=t.arrays,c=t.calSettings,d=t.divs,c.displayNow=new Date,c.NOWmonth=c.NOW.getMonth(),c.NOWyear=c.NOW.getFullYear(),t.createCal(),t.navCal()},createCal:function(){c.displayNowTime=c.displayNow.getTime(),c.date=c.NOW.getDate(),c.day=c.displayNow.getDay(),c.month=c.displayNow.getMonth(),c.year=c.displayNow.getFullYear(),c.firstDay=new Date(c.year,c.month,1),c.firstDay=c.firstDay.getDay(),c.NOWmonth===c.month&&c.NOWyear===c.year?c.displayOffset=0:c.NOWyear===c.year&&c.NOWmonth>c.month||c.NOWYEAR>c.year?c.displayOffset=-1:(c.NOWyear===c.year&&c.NOWmonth<c.month||c.NOWyear<c.year)&&(c.displayOffset=1),c.monthLength=a.daysInMonths[c.month],1==c.month&&(c.year%4===0&&c.year%100!==0||c.year%40===0)&&(c.monthLength=29),c.niceDay=a.days[c.day],c.niceMonth=a.months[c.month],d.calTitle.innerHTML=c.niceMonth+" "+c.year;var e=1;c.calHTML="";for(var n=0;9>n;n++){c.calHTML+='<div class="row">';for(var s=0;7>s;s++)e<=c.monthLength&&(n>0||s>=c.firstDay)?(e===c.date?c.calHTML+='<div class="item" id="today" data-dow="'+s+'">':c.calHTML+='<div class="item" data-dow="'+s+'">',c.calHTML+='<span class="bg"></span>',c.calHTML+='<span class="num">',c.calHTML+=e,e++,c.calHTML+="</span>",c.calHTML+="</div>"):(c.calHTML+='<div class="item hidden-vert">',c.calHTML+='<span class="bg"></span>',c.calHTML+='<span class="num"></span>',c.calHTML+="</div>");if(c.calHTML+="</div>",e>c.monthLength)break}d.calAppend.innerHTML=c.calHTML,d.days=document.getElementsByClassName("item"),t.updateCal()},updateCal:function(){for(var e=0;e<d.days.length;e++)for(var a=d.days[e].getElementsByClassName("num"),n=d.days[e].getElementsByClassName("bg"),s=0;s<a.length;s++){var r=parseInt(a[s].innerHTML);0===c.displayOffset&&(r||(r=0));for(var i=0;i<n.length;i++)0===c.displayOffset?r<c.date?n[i].style.height="100%":r===c.date&&(n[i].classList.add("bg--today"),n[i].style.height=t.minutesUntilMidnight()+"%"):-1===c.displayOffset&&(n[i].style.height="100%")}},minutesUntilMidnight:function(){var e,a,t,c=new Date,n=1440;return c.setHours(24),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0),e=c.getTime()-(new Date).getTime(),e=e/1e3/60,a=e/n*100,t=parseInt(100-a)},navCal:function(){for(var e=0;e<d.arrows.length;e++){var a,n=d.arrows[e];n.addEventListener("click",function(e){e.preventDefault(),a=this.getAttribute("data-dir"),"next"===a?11===c.month?(c.nextMonth=0,c.nextYear=c.year+1):(c.nextMonth=c.month+1,c.nextYear=c.year):"prev"===a&&(0===c.month?(c.nextMonth=11,c.nextYear=c.year-1):(c.nextMonth=c.month-1,c.nextYear=c.year)),c.displayNow=new Date(c.nextYear,c.nextMonth,1),t.createCal()})}}};window.addEventListener("load",function(){calendar.init()});