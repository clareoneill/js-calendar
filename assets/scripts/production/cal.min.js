var t,s,calendar={arrays:{days:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],months:["january","february","march","april","may","june","july","august","september","october","november","december"],daysInMonths:[31,28,31,30,31,30,31,31,30,31,30,31]},settings:{now:"",nowTime:"",date:"",day:"",niceDay:"",month:"",niceMonth:"",year:"",firstDay:"",monthLength:"",calHTML:""},divs:{cal:document.getElementById("calendar"),days:""},init:function(){t=this,a=t.arrays,s=t.settings,d=t.divs,s.now=new Date,s.nowTime=s.now.getTime(),s.date=s.now.getDate(),s.day=s.now.getDay(),s.month=s.now.getMonth(),s.year=s.now.getFullYear(),s.firstDay=new Date(s.year,s.month,1),s.firstDay=s.firstDay.getDay(),s.monthLength=a.daysInMonths[s.month],1==s.month&&(s.year%4==0&&s.year%100!=0||s.year%40==0)&&(s.monthLength=29),s.niceDay=a.days[s.day],s.niceMonth=a.months[s.month],t.createCal()},createCal:function(){for(var a=1,e=0;9>e;e++){s.calHTML+='<div class="row">';for(var n=0;7>n;n++)a===s.date?s.calHTML+='<div class="item" id="today">':s.calHTML+='<div class="item">',s.calHTML+='<span class="bg"></span>',s.calHTML+='<span class="num">',a<=s.monthLength&&(e>0||n>=s.firstDay)&&(s.calHTML+=a,a++),s.calHTML+="</span>",s.calHTML+="</div>";if(s.calHTML+="</div>",a>s.monthLength)break}d.cal.innerHTML+=s.calHTML,d.days=document.getElementsByClassName("item"),t.updateCal(),setInterval(function(){t.updateCal()},6e4)},updateCal:function(){for(var a=0;a<d.days.length;a++)for(var e=d.days[a].getElementsByClassName("num"),n=d.days[a].getElementsByClassName("bg"),i=0;i<e.length;i++){var r=parseInt(e[i].innerHTML);r||(r=0);for(var o=0;o<n.length;o++)r<s.date?n[o].style.height="100%":r===s.date&&(n[o].classList.add("bg--today"),n[o].style.height=t.minutesUnilMidnight()+"%")}},minutesUnilMidnight:function(){var a,s,e,t=new Date,n=1440;return t.setHours(24),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),a=t.getTime()-(new Date).getTime(),a=a/1e3/60,s=a/n*100,e=parseInt(100-s)}};window.addEventListener("load",function(){calendar.init()});