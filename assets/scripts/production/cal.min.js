var t,s,calendar={arrays:{days:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],months:["january","february","march","april","may","june","july","august","september","october","november","december"],daysInMonths:[31,28,31,30,31,30,31,31,30,31,30,31]},settings:{now:"",nowTime:"",date:"",day:"",niceDay:"",month:"",niceMonth:"",year:"",firstDay:"",monthLength:"",calHTML:""},divs:{month:document.getElementById("month"),cal:document.getElementById("calendar"),days:""},init:function(){t=this,a=t.arrays,s=t.settings,d=t.divs,s.now=new Date,s.nowTime=s.now.getTime(),s.date=s.now.getDate(),s.day=s.now.getDay(),s.month=s.now.getMonth(),s.year=s.now.getFullYear(),s.firstDay=new Date(s.year,s.month,1),s.firstDay=s.firstDay.getDay(),s.monthLength=a.daysInMonths[s.month],1==s.month&&(s.year%4===0&&s.year%100!==0||s.year%40===0)&&(s.monthLength=29),s.niceDay=a.days[s.day],s.niceMonth=a.months[s.month],t.createCal()},createCal:function(){d.month.innerHTML=s.niceMonth;for(var a=1,e=0;9>e;e++){s.calHTML+='<div class="row">';for(var n=0;7>n;n++)a<=s.monthLength&&(e>0||n>=s.firstDay)?(a===s.date?s.calHTML+='<div class="item" id="today" data-dow="'+n+'">':s.calHTML+='<div class="item" data-dow="'+n+'">',s.calHTML+='<span class="bg"></span>',s.calHTML+='<span class="num">',s.calHTML+=a,a++,s.calHTML+="</span>",s.calHTML+="</div>"):(s.calHTML+='<div class="item hidden-vert">',s.calHTML+='<span class="bg"></span>',s.calHTML+='<span class="num"></span>',s.calHTML+="</div>");if(s.calHTML+="</div>",a>s.monthLength)break}d.cal.innerHTML+=s.calHTML,d.days=document.getElementsByClassName("item"),t.updateCal(),setInterval(function(){t.updateCal()},9e5)},updateCal:function(){for(var a=0;a<d.days.length;a++)for(var e=d.days[a].getElementsByClassName("num"),n=d.days[a].getElementsByClassName("bg"),i=0;i<e.length;i++){var o=parseInt(e[i].innerHTML);o||(o=0);for(var l=0;l<n.length;l++)o<s.date?n[l].style.height="100%":o===s.date&&(n[l].classList.add("bg--today"),n[l].style.height=t.minutesUntilMidnight()+"%",console.log(t.minutesUntilMidnight()))}},minutesUntilMidnight:function(){var s,a,t,e=new Date,n=1440;return e.setHours(24),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),s=e.getTime()-(new Date).getTime(),s=s/1e3/60,a=s/n*100,t=parseInt(100-a)}};window.addEventListener("load",function(){calendar.init()});